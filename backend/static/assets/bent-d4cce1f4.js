function d(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}const h=new Set(["json","buffer","string"]);var p=i=>(...r)=>{const n=new Set;let e,c,f,o="";return r.forEach(t=>{if(typeof t=="string")if(t.toUpperCase()===t)if(e){const s=`Can't set method to ${t}, already set to ${e}.`;throw new Error(s)}else e=t;else if(t.startsWith("http:")||t.startsWith("https:"))o=t;else if(h.has(t))c=t;else throw new Error(`Unknown encoding, ${t}`);else if(typeof t=="number")n.add(t);else if(typeof t=="object")if(Array.isArray(t)||t instanceof Set)t.forEach(s=>n.add(s));else{if(f)throw new Error("Cannot set headers twice.");f=t}else throw new Error(`Unknown type: ${typeof t}`)}),e||(e="GET"),n.size===0&&n.add(200),i(n,e,c,f,o)};const l=p;class u extends Error{constructor(r,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,u),this.name="StatusError",this.message=r.statusMessage,this.statusCode=r.status,this.res=r,this.json=r.json.bind(r),this.text=r.text.bind(r),this.arrayBuffer=r.arrayBuffer.bind(r);let e;Object.defineProperty(this,"responseBody",{get:()=>(e||(e=this.arrayBuffer()),e)}),this.headers={};for(const[f,o]of r.headers.entries())this.headers[f.toLowerCase()]=o}}const w=(i,r,n,e,c)=>async(f,o,t={})=>{f=c+(f||"");let s=new URL(f);if(e||(e={}),s.username&&(e.Authorization="Basic "+btoa(s.username+":"+s.password),s=new URL(s.protocol+"//"+s.host+s.pathname+s.search)),s.protocol!=="https:"&&s.protocol!=="http:")throw new Error(`Unknown protocol, ${s.protocol}`);if(o&&!(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="string"))if(typeof o=="object")o=JSON.stringify(o),e["Content-Type"]="application/json";else throw new Error("Unknown body type.");t=new Headers({...e||{},...t});const a=await fetch(s,{method:r,headers:t,body:o});if(a.statusCode=a.status,!i.has(a.status))throw new u(a);return n==="json"?a.json():n==="buffer"?a.arrayBuffer():n==="string"?a.text():a};var y=l(w);export{y as b,d as g};
//# sourceMappingURL=bent-d4cce1f4.js.map
